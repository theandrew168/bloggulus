<!DOCTYPE html>
<html lang="en">

<head>
	<title>Bloggulus - A website for avid blog readers</title>

	<meta charset="utf-8" />
	<meta name="description" content="Bloggulus - A website for avid blog readers" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<link rel="stylesheet" href="/css/fonts.css" />
	<link rel="stylesheet" href="/css/tailwind.min.css" />
	<script src="/js/htmx.min.js" defer></script>
</head>

<body class="bg-gray-100 sans-serif flex flex-col items-stretch min-h-screen">

	<!-- nav bar -->
	<nav class="bg-white shadow">
		<div class="max-w-3xl mx-auto py-4 px-6 md:px-0 flex justify-between items-center gap-x-2">
			<!-- brand -->
			<a href="/" class="block text-gray-800 text-xl md:text-2xl hover:text-gray-500">Bloggulus</a>
		</div>
	</nav>

	<!-- main content -->
	<main class="flex-grow basis-0">
		<div class="max-w-3xl px-6 md:px-0 mx-auto">
			<h1 class="text-lg font-semibold mt-6 mb-2">Blogs</h1>
			<div class="mb-4">
				<form method="POST" action="/blogs" hx-post="/blogs" hx-target="#blogs" class="flex flex-row gap-4">
					<input
						type="text"
						name="feedURL"
						placeholder="Add Feed"
						class="block rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-gray-800"
					/>
					<button type="submit" name="intent" value="add" class="rounded-md px-3 py-1.5 text-sm font-semibold bg-gray-700 text-gray-100 shadow-sm hover:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-700">
						Add
					</button>
				</form>
			</div>
			{{block "blogs" .}}
			<div id="blogs" class="divide-y divide-gray-200">
				{{range .Blogs}}
				<div class="py-2 flex gap-4 items-center justify-between">
					<a class="hover:underline" href="/blogs/{{.ID}}">{{.Title}}</a>
					{{block "blog" .}}
					<form method="POST" action="/blogs" hx-post="/blogs">
						<input type="hidden" name="blogID" value="{{.ID}}" />
						{{if .IsFollowing}}
						<button type="submit" name="intent" value="unfollow" class="rounded-md px-3 py-1.5 text-sm font-semibold bg-gray-700 text-gray-100 shadow-sm hover:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-700">Unfollow</button>
						{{else}}
						<button type="submit" name="intent" value="follow" class="rounded-md px-3 py-1.5 text-sm font-semibold bg-gray-700 text-gray-100 shadow-sm hover:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-700">Follow</button>
						{{end}}
					</form>
					{{end}}
				</div>
				{{end}}
			</div>
			{{end}}
		</div>
	</main>

	<!-- footer -->
	<footer class="text-gray-100 bg-gray-800">
		<div class="max-w-3xl mx-auto py-4">
			<div class="flex flex-col items-center justify-between md:flex-row space-y-1 md:space-y-0">
				<a href="/" class="text-xl font-semibold text-gray-100 hover:text-gray-400">Bloggulus</a>
				<a href="https://shallowbrooksoftware.com" class="text-gray-100 hover:text-gray-400">Shallow Brook Software</a>
			</div>
		</div>
	</footer>

</body>

</html>
